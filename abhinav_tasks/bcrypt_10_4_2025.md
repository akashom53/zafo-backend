## 🔐 Task: Hash User Passwords Using Bcrypt

### 👤 Assigned to: Abhinav  
### 📅 Date: 2025-04-10  
### 📌 Goal: Make sure user passwords are securely stored by hashing them before saving to the database.

---

### 🧠 Why This Is Important

Passwords should **never be stored as plain text** — that’s a serious security risk.

We use **bcrypt** to hash passwords before saving them, so even if the database is leaked, no one can reverse-engineer the original password.

---

### 🛠️ Steps to Implement

#### 1. Install `bcrypt`

```bash
npm install bcrypt
npm install -D @types/bcrypt
```

---

#### 2. Modify the `create()` method in `users.service.ts`

```ts
import * as bcrypt from 'bcrypt';

async create(userDto: CreateUserDto): Promise<User> {
  const saltRounds = 10;

  // Hash the password before saving
  const hashedPassword = await bcrypt.hash(userDto.password, saltRounds);

  const createdUser = new this.userModel({
    ...userDto,
    password: hashedPassword,
  });

  return createdUser.save();
}
```

✅ Make sure `CreateUserDto` includes a `password` field.

---

#### 3. Test It

- Use Postman or a script to create a new user.
- In MongoDB, the password should now look like:

```
$2b$10$adf8a...restofhash
```

This means it's working correctly ✅

---

#### 🔧 Optional: Use a Helper Function

```ts
async hashPassword(password: string): Promise<string> {
  const saltRounds = 10;
  return bcrypt.hash(password, saltRounds);
}
```

Then in your create method:

```ts
const hashedPassword = await this.hashPassword(userDto.password);
```

---

### 🧪 Bonus Tip: Avoid Double Hashing

If you add a user update function later, **only hash the password again if it’s changed**.

---

### ✅ Deliverable

- [ ] User creation stores bcrypt-hashed password in DB.
- [ ] (Optional) Screenshot of created user or MongoDB record.
